var B=Object.defineProperty,P=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var f=(e,a,t)=>a in e?B(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,d=(e,a)=>{for(var t in a||(a={}))k.call(a,t)&&f(e,t,a[t]);if(u)for(var t of u(a))y.call(a,t)&&f(e,t,a[t]);return e},g=(e,a)=>P(e,T(a));var m=(e,a,t)=>new Promise((s,r)=>{var c=o=>{try{n(t.next(o))}catch(l){r(l)}},p=o=>{try{n(t.throw(o))}catch(l){r(l)}},n=o=>o.done?s(o.value):Promise.resolve(o.value).then(c,p);n((t=t.apply(e,a)).next())});import{B as I,b as C}from"./index-0a9e2861.js";import{B as R}from"./BasicForm-e261a333.js";import"./componentMap-db59878c.js";import{u as $}from"./useForm-84c9b2f9.js";import"./RadioButtonGroup-8412b0f8.js";import{s as x}from"./role-91c3552f.js";import{a6 as A,_ as L}from"./index.js";import{g as S}from"./dict-b4d68b90.js";import{n as O,d as V,k as h,u as b,e as j,a8 as _,_ as q,a9 as G,aa as U,f as z,ad as D}from"./vue-625a50e2.js";import{aP as N}from"./antd-d44a863f.js";import{g as W,u as E,c as H}from"./template-c6c55654.js";const ce=[{title:"模板名称",dataIndex:"name",width:200},{title:"模板分类",dataIndex:"type",width:180},{title:"状态",dataIndex:"status",width:120,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),O(N,{checked:e.status==="1",checkedChildren:"停用",unCheckedChildren:"启用",loading:e.pendingStatus,onChange(a){e.pendingStatus=!0;const t=a?"1":"0",{createMessage:s}=A();x(e.id,t).then(()=>{e.status=t,s.success("已成功修改角色状态")}).catch(()=>{s.error("修改角色状态失败")}).finally(()=>{e.pendingStatus=!1})}}))},{title:"创建时间",dataIndex:"created_at",width:180},{title:"备注",dataIndex:"remark"}],de=[{field:"name",label:"模板名称",component:"Input",colProps:{span:8}},{field:"type",label:"模板分类",component:"ApiSelect",componentProps:{api:S,params:{parent_id:1},labelField:"name",valueField:"id"},colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]},colProps:{span:8}}],J=[{field:"name",label:"模板名称",required:!0,component:"Input"},{label:"模板分类",field:"type",component:"ApiSelect",componentProps:{api:S,params:{parent_id:1},labelField:"name",valueField:"id"},required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"1",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]}},{label:"备注",field:"remark",component:"InputTextArea"}],K=V({name:"TemplateModal",components:{BasicModal:I,BasicForm:R},emits:["success","register"],setup(e,{emit:a}){const t=h(!0),s=h(0),[r,{resetFields:c,setFieldsValue:p,validate:n}]=$({labelWidth:100,baseColProps:{span:24},schemas:J,showActionButtonGroup:!1}),[o,{setModalProps:l,closeModal:v}]=C(i=>m(this,null,function*(){if(c(),l({confirmLoading:!1}),t.value=!!(i!=null&&i.isUpdate),b(t)){s.value=i.record.id;const w=yield W({id:s.value});p(d({},w))}})),M=j(()=>b(t)?"编辑模板":"新增模板");function F(){return m(this,null,function*(){try{const i=yield n();l({confirmLoading:!0}),t.value?yield E(g(d({},i),{id:s.value})):yield H(d({},i)),v(),a("success")}finally{l({confirmLoading:!1})}})}return{registerModal:o,registerForm:r,getTitle:M,handleSubmit:F}}});function Q(e,a,t,s,r,c){const p=_("BasicForm"),n=_("BasicModal");return q(),G(n,D(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:U(()=>[z(p,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const X=L(K,[["render",Q]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as T,me as a,ce as c,de as s};
