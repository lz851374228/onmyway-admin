var h=Object.defineProperty,B=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var v=(t,e,o)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,C=(t,e)=>{for(var o in e||(e={}))k.call(e,o)&&v(t,o,e[o]);if(g)for(var o of g(e))w.call(e,o)&&v(t,o,e[o]);return t},D=(t,e)=>B(t,M(e));var s=(t,e,o)=>new Promise((l,m)=>{var d=a=>{try{n(o.next(a))}catch(p){m(p)}},r=a=>{try{n(o.throw(a))}catch(p){m(p)}},n=a=>a.done?l(a.value):Promise.resolve(a.value).then(d,r);n((o=o.apply(t,e)).next())});import{P as N}from"./index-dd53ef4b.js";import P from"./index-2afe09f1.js";import{b as V,g as A,e as S}from"./template-c6c55654.js";import{d as $,ai as b,r as U,D as W,H,a8 as f,v as J,_ as T,a9 as O,aa as c,t as q,$ as E,f as u,a0 as R,E as y,ac as x}from"./vue-625a50e2.js";import{aL as L,_ as j}from"./index.js";import"./useContentViewHeight-52d56a6c.js";import"./useWindowSizeFn-6fb3a97e.js";import"./onMountedOrActivated-6a3fbc2b.js";import"./antd-d44a863f.js";import"./FormRender-c8c68f8d.js";import"./index-5e22aaa9.js";import"./formItemConfig-7a2acbe6.js";import"./componentMap-db59878c.js";import"./useFormItem-413320fc.js";import"./RadioButtonGroup-8412b0f8.js";import"./index-0a9e2861.js";import"./index-1afce7c1.js";import"./index-8f3da8aa.js";import"./uuid-31b8b5a4.js";import"./download-3152d4ec.js";import"./base64Conver-39fc0d26.js";import"./index-dfb5c92c.js";import"./IconPicker.vue_vue_type_style_index_0_lang-319d661f.js";import"./useCopyToClipboard-2275284e.js";import"./index-c51e4158.js";import"./index-803c64a0.js";import"./useFormDesignState-40932730.js";const z=$({name:"Write",components:{VFormCreate:P,PageWrapper:N,Button:L},setup(){const t=b(),e=U({formModel:{},formConfig:{},fApi:{},isPending:!1,loading:!1,formTemplateId:0,formTemplateDataId:0}),o=()=>s(this,null,function*(){e.loading=!0,yield V({form_template_id:e.formTemplateId,form_data:JSON.stringify(e.formModel),addition:""}),e.loading=!1}),l=()=>{e.formModel={}},m=()=>s(this,null,function*(){var r;if(e.isPending=!1,e.formTemplateId=parseInt((r=t.query)==null?void 0:r.form_template_id),e.formTemplateId){let n=yield A({id:e.formTemplateId});e.formConfig=JSON.parse(n.schemas),e.isPending=!0}}),d=()=>s(this,null,function*(){var r;if(e.formTemplateDataId=parseInt((r=t.query)==null?void 0:r.form_template_data_id),e.formTemplateDataId){let n=yield S({id:e.formTemplateDataId});e.formModel=JSON.parse(n.form_data)}});return W(()=>s(this,null,function*(){yield m(),yield d()})),D(C({},H(e)),{handleSubmit:o,handleCancel:l})}});const G={key:0,class:"write-content"},K={class:"content-btn"};function Q(t,e,o,l,m,d){const r=f("a-input"),n=f("VFormCreate"),a=f("Button"),p=f("PageWrapper"),I=J("loading");return T(),O(p,{dense:"",contentFullHeight:"",fixedHeight:""},{default:c(()=>[t.isPending?q((T(),E("div",G,[u(n,{"form-config":t.formConfig,fApi:t.fApi,"onUpdate:fApi":e[0]||(e[0]=i=>t.fApi=i),formModel:t.formModel,"onUpdate:formModel":e[1]||(e[1]=i=>t.formModel=i)},{slotName:c(({formModel:i,field:_})=>[u(r,{value:i[_],"onUpdate:value":F=>i[_]=F,placeholder:"我是插槽传递的输入框"},null,8,["value","onUpdate:value"])]),_:1},8,["form-config","fApi","formModel"]),R("div",K,[u(a,{style:{"margin-right":"10px"},onClick:t.handleCancel},{default:c(()=>[y("取 消")]),_:1},8,["onClick"]),u(a,{type:"primary",onClick:t.handleSubmit},{default:c(()=>[y("保 存")]),_:1},8,["onClick"])])])),[[I,t.loading]]):x("",!0)]),_:1})}const Be=j(z,[["render",Q],["__scopeId","data-v-f0941182"]]);export{Be as default};
