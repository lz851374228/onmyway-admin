var R=Object.defineProperty;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var _=(o,t,e)=>t in o?R(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,b=(o,t)=>{for(var e in t||(t={}))y.call(t,e)&&_(o,e,t[e]);if(g)for(var e of g(t))I.call(t,e)&&_(o,e,t[e]);return o};var c=(o,t,e)=>new Promise((n,m)=>{var p=r=>{try{l(e.next(r))}catch(s){m(s)}},u=r=>{try{l(e.throw(r))}catch(s){m(s)}},l=r=>r.done?n(r.value):Promise.resolve(r.value).then(p,u);l((e=e.apply(o,t)).next())});import{B as x}from"./BasicForm-e261a333.js";import"./componentMap-db59878c.js";import{u as L}from"./useForm-84c9b2f9.js";import"./RadioButtonGroup-8412b0f8.js";import"./index.js";import{a as N,B as P}from"./index-13c024b3.js";import{_ as U}from"./index-afd7ef17.js";import{c as V}from"./system-66b8f942.js";import{d as C,k as v,u as i,e as q,_ as A,a9 as G,aa as w,f as h,ad as S}from"./vue-625a50e2.js";import"./FormItem.vue_vue_type_script_lang-c8c36622.js";import"./index-1afce7c1.js";import"./index-8f3da8aa.js";import"./antd-d44a863f.js";import"./helper-d16d18bc.js";import"./BasicForm.vue_vue_type_style_index_0_lang-03718be0.js";import"./uniqBy-19b91793.js";import"./index-0a9e2861.js";import"./useWindowSizeFn-6fb3a97e.js";import"./useFormItem-413320fc.js";import"./uuid-31b8b5a4.js";import"./download-3152d4ec.js";import"./base64Conver-39fc0d26.js";import"./index-dfb5c92c.js";import"./IconPicker.vue_vue_type_style_index_0_lang-319d661f.js";import"./useCopyToClipboard-2275284e.js";import"./index-c51e4158.js";import"./useContextMenu-94133f3c.js";const T=[{field:"roleName",label:"角色名称",required:!0,component:"Input"},{field:"roleValue",label:"角色值",required:!0,component:"Input"},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"1"},{label:"停用",value:"0"}]}},{label:"备注",field:"remark",component:"InputTextArea"},{label:" ",field:"menu",slot:"menu",component:"Input"}],ge=C({__name:"RoleDrawer",emits:["success","register"],setup(o,{emit:t}){const e=v(!0),n=v([]),[m,{resetFields:p,setFieldsValue:u,validate:l}]=L({labelWidth:90,baseColProps:{span:24},schemas:T,showActionButtonGroup:!1}),[r,{setDrawerProps:s,closeDrawer:D}]=N(a=>c(this,null,function*(){p(),s({confirmLoading:!1}),i(n).length===0&&(n.value=yield V()),e.value=!!(a!=null&&a.isUpdate),i(e)&&u(b({},a.record))})),B=q(()=>i(e)?"编辑角色":"新增角色");function k(){return c(this,null,function*(){try{const a=yield l();s({confirmLoading:!0}),console.log(a),D(),t("success")}finally{s({confirmLoading:!1})}})}return(a,$)=>(A(),G(i(P),S(a.$attrs,{onRegister:i(r),showFooter:"",title:B.value,width:"500px",onOk:k}),{default:w(()=>[h(i(x),{onRegister:i(m)},{menu:w(({model:f,field:d})=>[h(i(U),{value:f[d],"onUpdate:value":F=>f[d]=F,treeData:n.value,fieldNames:{title:"menuName",key:"id"},checkable:"",toolbar:"",title:"菜单分配"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ge as default};
