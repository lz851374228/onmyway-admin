var F=Object.defineProperty,P=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(t,o,e)=>o in t?F(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,m=(t,o)=>{for(var e in o||(o={}))y.call(o,e)&&g(t,e,o[e]);if(f)for(var e of f(o))S.call(o,e)&&g(t,e,o[e]);return t},b=(t,o)=>P(t,k(o));var u=(t,o,e)=>new Promise((r,i)=>{var d=a=>{try{n(e.next(a))}catch(c){i(c)}},l=a=>{try{n(e.throw(a))}catch(c){i(c)}},n=a=>a.done?r(a.value):Promise.resolve(a.value).then(d,l);n((e=e.apply(t,o)).next())});import{B as $,b as x}from"./index-0a9e2861.js";import{B as C}from"./BasicForm-e261a333.js";import"./componentMap-db59878c.js";import{u as T}from"./useForm-84c9b2f9.js";import"./RadioButtonGroup-8412b0f8.js";import{a as L,g as O,u as R,c as q}from"./dict-b4d68b90.js";import{d as N,k as _,u as h,e as j,a8 as I,_ as A,a9 as U,aa as V,f as z,ad as G}from"./vue-625a50e2.js";import{_ as W}from"./index.js";const se=[{title:"字典名称",dataIndex:"name",width:200},{title:"字典编码",dataIndex:"code",width:180},{title:"排序",dataIndex:"order",width:50},{title:"创建时间",dataIndex:"created_at",width:180},{title:"备注",dataIndex:"remark"}],re=[{field:"name",label:"字典名称",component:"Input",colProps:{span:8}},{field:"code",label:"字典编码",component:"Input",colProps:{span:8}}],E=[{field:"name",label:"字典名称",required:!0,component:"Input"},{field:"code",label:"字典编码",required:!0,component:"Input"},{field:"parent_id",label:"上级字典",component:"TreeSelect",componentProps:{fieldNames:{label:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"order",label:"排序",component:"InputNumber",required:!0},{label:"备注",field:"remark",component:"InputTextArea"}],H=N({name:"DictModal",components:{BasicModal:$,BasicForm:C},emits:["success","register"],setup(t,{emit:o}){const e=_(!0),r=_(0),[i,{resetFields:d,setFieldsValue:l,updateSchema:n,validate:a}]=T({labelWidth:100,baseColProps:{span:24},schemas:E,showActionButtonGroup:!1}),[c,{setModalProps:p,closeModal:M}]=x(s=>u(this,null,function*(){if(d(),p({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),h(e)){r.value=s.record.id;const D=yield L({id:r.value});l(m({},D))}const v=yield O();n({field:"parent_id",componentProps:{treeData:v}})})),w=j(()=>h(e)?"编辑字典":"新增字典");function B(){return u(this,null,function*(){try{const s=yield a();p({confirmLoading:!0}),e.value?yield R(b(m({},s),{id:r.value})):yield q(m({},s)),M(),o("success")}finally{p({confirmLoading:!1})}})}return{registerModal:c,registerForm:i,getTitle:w,handleSubmit:B}}});function J(t,o,e,r,i,d){const l=I("BasicForm"),n=I("BasicModal");return A(),U(n,G(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:V(()=>[z(l,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const K=W(H,[["render",J]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as D,ie as a,se as c,re as s};
