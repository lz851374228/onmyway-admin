var D=Object.defineProperty,F=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var g=(t,o,e)=>o in t?D(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,p=(t,o)=>{for(var e in o||(o={}))k.call(o,e)&&g(t,e,o[e]);if(f)for(var e of f(o))y.call(o,e)&&g(t,e,o[e]);return t},b=(t,o)=>F(t,S(o));var m=(t,o,e)=>new Promise((s,n)=>{var d=a=>{try{r(e.next(a))}catch(c){n(c)}},i=a=>{try{r(e.throw(a))}catch(c){n(c)}},r=a=>a.done?s(a.value):Promise.resolve(a.value).then(d,i);r((e=e.apply(t,o)).next())});import{B as x,b as R}from"./index-0a9e2861.js";import{B as T}from"./BasicForm-e261a333.js";import"./componentMap-db59878c.js";import{u as $}from"./useForm-84c9b2f9.js";import"./RadioButtonGroup-8412b0f8.js";import{n as C,d as L,k as _,u as h,e as O,a8 as v,_ as q,a9 as N,aa as V,f as j,ad as A}from"./vue-625a50e2.js";import{al as G}from"./antd-d44a863f.js";import{a as U,g as z,u as W,c as E}from"./dept-80fca393.js";import{_ as H}from"./index.js";const ie=[{title:"部门名称",dataIndex:"name",width:160,align:"left"},{title:"排序",dataIndex:"order",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:t})=>{const e=~~t.status===0,s=e?"green":"red",n=e?"启用":"停用";return C(G,{color:s},()=>n)}},{title:"创建时间",dataIndex:"created_at",width:180},{title:"备注",dataIndex:"remark"}],ce=[{field:"name",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],J=[{field:"name",label:"部门名称",component:"Input",required:!0},{field:"parent_id",label:"上级部门",component:"TreeSelect",componentProps:{fieldNames:{label:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"order",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}],K=L({name:"DeptModal",components:{BasicModal:x,BasicForm:T},emits:["success","register"],setup(t,{emit:o}){const e=_(!0),s=_(0),[n,{resetFields:d,setFieldsValue:i,updateSchema:r,validate:a}]=$({labelWidth:100,baseColProps:{span:24},schemas:J,showActionButtonGroup:!1}),[c,{setModalProps:u,closeModal:B}]=R(l=>m(this,null,function*(){if(d(),u({confirmLoading:!1}),e.value=!!(l!=null&&l.isUpdate),h(e)){s.value=l.record.id;const P=yield U({id:s.value});i(p({},P))}const I=yield z();r({field:"parent_id",componentProps:{treeData:I}})})),M=O(()=>h(e)?"编辑部门":"新增部门");function w(){return m(this,null,function*(){try{const l=yield a();u({confirmLoading:!0}),e.value?yield W(b(p({},l),{id:s.value})):yield E(p({},l)),B(),o("success")}finally{u({confirmLoading:!1})}})}return{registerModal:c,registerForm:n,getTitle:M,handleSubmit:w}}});function Q(t,o,e,s,n,d){const i=v("BasicForm"),r=v("BasicModal");return q(),N(r,A(t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:V(()=>[j(i,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const X=H(K,[["render",Q]]),de=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as D,de as a,ie as c,ce as s};
